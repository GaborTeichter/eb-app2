/*! eb-app2 2021-06-02 */

var app=angular.module("app",[]);app.factory("matchFactory",["$http","$q",function(a,r){return{getMatches:function(){var e=r.defer();return a.get("/match/vote").then(function(t){e.resolve(t.data)},function(t){e.reject(t)}),e.promise},getMatchList:function(){var n=this,o=r.defer();return a.get("/match/list").then(function(t){for(var e=0;e<t.data.length;e++)t.data[e].startDate=n.dateStringToDate(t.data[e].startDate);o.resolve(t.data)},function(t){o.reject(t)}),o.promise},getFlags:function(){var e=r.defer();return a.get("json/flag.json").then(function(t){e.resolve(t.data)},function(t){e.reject(t)}),e.promise},createMatch:function(t){var e=r.defer();return a.post("/match/new",t).then(function(t){e.resolve(t.data)},function(t){e.reject(t)}),e.promise},updateMatch:function(t){var e=r.defer();return a.post("/match/update",t).then(function(t){e.resolve(t.data)},function(t){e.reject(t)}),e.promise},deleteMatch:function(t){var e=r.defer();return a.delete("/match/"+t).then(function(t){e.resolve(t.data)},function(t){e.reject(t)}),e.promise},dateStringToDate:function(t){return new Date(new RegExp("(.{4}-.{2}-.{2})").exec(t)[1])},sendVote:function(t){var e=r.defer();return a.post("/match/vote",t).then(function(t){e.resolve(t.data)},function(t){e.reject(t)}),e.promise}}}]),app.controller("matchController",["$scope","matchFactory",function(e,n){e.flags={},n.getFlags().then(function(t){console.log("flags",t),e.flags=t,e.getMatches()},function(t){e.matchesError=t}),e.matches=[],e.getMatches=function(){n.getMatches().then(function(t){console.log("matches",t),e.matches=t},function(t){e.matchesError=t})},e.getFlag=function(t){return e.flags[t]},e.sendVote=function(t){n.sendVote(t).then(function(t){console.log(t)})}}]),app.controller("menuController",["$scope","matchFactory",function(t,e){t.appName="EB-APP2",t.currentPage=location.href.replace(location.protocol+"//"+location.host,"")}]);